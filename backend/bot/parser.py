
from ..commands.top_holders_holdings import get_top_holders_holdings
from ..commands.holding_distribution import get_holding_distribution 
from ..commands.fresh_wallets import fresh_wallets
import time
import asyncio
import json
import ast
import re


'''
TODO: Use splitfunction and send messages in chunks if exeeds 4096 characters
'''
MAX_MESSAGE_LENGTH = 4096
def split_message(text):
    return [text[i:i + MAX_MESSAGE_LENGTH] for i in range(0, len(text), MAX_MESSAGE_LENGTH)]

def format_number(amount, with_dollar_sign=True):
    if with_dollar_sign:
        amount = round(amount)
    """
    Converts a number to a readable money format.
    
    :param amount: The number to be formatted.
    :param with_dollar_sign: Boolean that determines whether to include the dollar sign.
    :return: A formatted string with the appropriate money notation.
    """
    if with_dollar_sign:
        prefix = "$"
    else:
        prefix = ""

    # Define thresholds for 'k', 'm', and 'b' suffixes
    if amount >= 1_000_000:
        formatted_amount = f"{amount / 1_000_000:.1f}m"  # Millions (1m = 1,000,000)
    elif amount >= 1_000:
        formatted_amount = f"{amount / 1_000:.1f}k"  # Thousands (1k = 1,000)
    else:
        formatted_amount = str(amount)  # No suffix for smaller amounts

    # Remove the ".0" from whole numbers
    if formatted_amount.endswith(".0"):
        formatted_amount = formatted_amount[:-2]

    return escape_markdown(f"{prefix}{formatted_amount}")

def escape_markdown(text):
    # List of characters that need to be escaped in Markdown
    special_chars = r'\`*_{}[]()#+-.!|'
    
    # Use a regular expression to replace each special character with a backslash and the character
    return re.sub(r'([{}])'.format(re.escape(special_chars)), r'\\\1', text)

async def top_holders_holdings_parsed(token, limit):
    token_info, top_holders = await get_top_holders_holdings(token, limit)
    #token_info, top_holders = token, limit
    print(token_info)
    print(top_holders)
    # Token information part=
    message = f"**Token Info**: {token_info['symbol']} \\({token_info['name']}\\)\n"
    message += f"├── MC: {format_number(token_info['market_cap'])}\n"
    message += f"├── Liquidity: {format_number(token_info['liquidity'])}\n\n"
    # message += f"├── Holders count: {token_info['holders']}\n"
    message += f"**Holdings of the top {len(top_holders)}:**\n\n"
    # Top holders part
    for holder in top_holders:
        wallet = holder['wallet']
        short_wallet = escape_markdown( shorten_address(wallet) ) 
        addy = f"[{short_wallet}](https://solscan.io/account/{wallet})"
        try:
            if "error" in holder:
                message += f"\\#{holder['count']}\\-\\({addy}\\)\\(💰 NW\\_Excl: $1M+\\) 🏦LP/Bot \\|\n"
                continue

            #addy = f"[{shorten_address(wallet)}](https://solscan.io/account/{wallet})"
            message += f"\\#{holder['count']}\\-\\({addy}\\)\\(💰 NW\\_Excl: {format_number(holder['net_worth_excluding'])}\\)  \\|\n"
            top1 = holder['first_top_holding']
            top2 = holder['second_top_holding']
            top3 = holder['third_top_holding']
            if top1:
                symbol = f"🥇[{top1['symbol']}](https://dexscreener.com/solana/{top1['address']})"
                message += f"{symbol}: {format_number(top1['valueUsd'])} \\|\n"
            if top2:
                symbol = f"🥈[{top2['symbol']}](https://dexscreener.com/solana/{top2['address']})"
                message += f" {symbol}: {format_number(top2['valueUsd'])} \\|\n"
            if top3:
                symbol = f"🥉[{top3['symbol']}](https://dexscreener.com/solana/{top3['address']})"
                message += f" {symbol}: {format_number(top3['valueUsd'])} \\|\n"
            message += "\n"
        except Exception as e:
            print(f" holder: {holder}")
            print(f"Error processing holder: {e}")
        message += "\n"
    print(message)
    return message


async def holder_distribution_parsed(token):
    
    '''
    TODO: Add Error handling
    '''
    # data = await get_holding_distribution(token) // uncomment for live data
    data = [{'0-500': 72.0, '500-1000': 2.0, '1000-5000': 6.0, '5000-25000': 2.0, '25000+': 18.0}, {'holder_count': 7199, 'retrieved_holders': 50, 'Symbol': 'Mizuki', 'Name': 'Mizuki'}, {'symbol': 'Mizuki', 'name': 'Mizuki', 'logo_url': 'https://ipfs.io/ipfs/Qmdtq5b4Z5JouWWothvSXydP3Rz8WyqTKtQVXhh5LiZrrR', 'liquidity': 828098.4949007538, 'market_cap': 18011571.94138404}]
    token_info = data[2]
    logo_url = token_info['logo_url']
    # Distribution
    data_pc = data[0]
    data_meta = data[1]
    distribution = [
        ("🫧", "0-500", data_pc['0-500']),
        ("🦐", "500-1000", data_pc['500-1000']),
        ("🐟", "1000-5000", data_pc['1000-5000']),
        ("🐬", "5000-25000", data_pc['5000-25000']),
        ("🦈", "25000+", data_pc['25000+'])
    ]
    
    # Create the bar visualization
    bars = []
    for emoji, range_str, percentage in distribution:
        bar_length = int(percentage / 10) if percentage > 0 else 0
        bar = "🟩" * bar_length
        bars.append(f"{emoji} |{bar} {percentage}%")

    # Convert percentages to holder counts (assuming all holders are represented by '25000+')
    total_holders = data_meta['holder_count']
    holder_counts = {
        "🫧 holding (0-500)": int(total_holders * data_pc['0-500'] / 100),
        "🦐 holding (500-1000)": int(total_holders * data_pc['500-1000'] / 100),
        "🐟 holding (1000-5000)": int(total_holders * data_pc['1000-5000'] / 100),
        "🐬 holding (5000-25000)": int(total_holders * data_pc['5000-25000'] / 100),
        "🦈 holding (25000+)": int(total_holders * data_pc['25000+'] / 100)
    }
    markdown = "📊 Holding Distributions for #{symbol}:- by @munki_bot🦧"
    info  =f"\n**Token Info**: {token_info['symbol']} \\({token_info['name']}\\)\n"
    info += f"├── MC: {format_number(token_info['market_cap'])}\n"
    info += f"├── Liquidity: {format_number(token_info['liquidity'])}\n\n"
    # Generate the Markdown message
    markdown = """📊 Holding Distributions for ${symbol}:
- by @munki_bot🦧{info}
{bars}
    """.format(symbol=data_meta['Symbol'], bars='\n'.join(bars), info=info)
    
    for emoji, count in holder_counts.items():
        markdown += f"{emoji}:  {count}\n"

    markdown += f"\nTotal Holders: {total_holders}"
    return escape_markdown(markdown), logo_url


def shorten_address(address: str, length: int = 4) -> str:
    """
    Shorten the address to the given length.
    """
    return f"{address[:length]}...{address[-length:]}"
# Convert to the readable format
def fresh_wallets_parsed(token, limit):
    token_info, wallet_ages = asyncio.run(fresh_wallets(token, limit))
    message_parts = [
        f"****Token Info****: {token_info['symbol']} ({token_info['name']})\n",
        f"├── MC: {format_number(token_info['market_cap'])}\n",   
        f"├── Liquidity: {format_number(token_info['liquidity'])}\n\n",
        f"Ordered by holding --------->\n\n",
        f"[🔴](http://example.com): <1 Week\n",
        f"🟠: <1 Month\n",
        f"🟡: <3 Months\n",
        f"🟢: >3 Months\n",
        f"🔵: LP/Bot \n\n"
    ]
    
    # Precompute current time
    current_time = int(time.time())
    count=0
    for wallet in wallet_ages:
        if count %10 == 0:
            message_parts.append("\n")
        if wallet['age'] is not None:
            wallet_age_unix = wallet['age']
            if wallet_age_unix == 0:   
                message_parts.append(f"[🔵](https://solscan.io/account/{wallet['wallet']})")
                count+=1
                continue
            # Calculate age in days only
            age_seconds = current_time - wallet_age_unix
            days = age_seconds // (24 * 60 * 60)
            if days < 7:
                message_parts.append(f"[🔴](https://solscan.io/account/{wallet['wallet']})")
            elif days < 30:
                message_parts.append(f"[🟠](https://solscan.io/account/{wallet['wallet']})")
            elif days < 90: 
                message_parts.append(f"[🟡](https://solscan.io/account/{wallet['wallet']})")
            else:
                message_parts.append(f"[🟢](https://solscan.io/account/{wallet['wallet']})")
            count+=1
    
    # Combine the message parts into a single string
    msg =  ''.join(message_parts)
if __name__ == "__main__":
    print(asyncio.run(holder_distribution_parsed("9XS6ayT8aCaoH7tDmTgNyEXRLeVpgyHKtZk5xTXpump")))
    token_info = '{"symbol": "OBOT", "name": "OBOT", "logoURI": "https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462", "liquidity": 1042030.2735918732, "market_cap": 8623704.06309531}'
    token_info = json.loads(token_info)
    toparse = '''[{'count': 1, 'wallet': 'GczJXQD9Bap8EypqDn6RCoUqQruKZVs2pkQL3fUHeuZS', 'amount': 64657241.403556, 'share_in_percent': 8.825, 'net_worth': 241501.49928305144, 'net_worth_excluding': 0.5859080368536524, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 64657241403556, 'uiAmount': 64657241.403556, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 241500.91337501458}, 'second_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 2951040, 'uiAmount': 0.00295104, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 0.5859080368521984}, 'third_top_holding': 0}, {'count': 2, 'wallet': 'HQg2zWY5jQSjVE9J5M5VrU59xjKkmLSAxq1GzLcUg61h', 'amount': 40000000, 'share_in_percent': 5.46, 'net_worth': 241500.91337501458, 'net_worth_excluding': 0.0, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 40000000000000, 'uiAmount': 40000000, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 241500.91337501458}, 'second_top_holding': 0, 'third_top_holding': 0}, {'count': 3, 'wallet': '5PAhQiYdLBd6SVdjzBQDxUAEFyDdF5ExNPQfcscnPRj5', 'amount': 39633333, 'share_in_percent': 5.41, 'net_worth': 187883424.81608614, 'net_worth_excluding': 187641923.90271112, 'first_top_holding': {'address': 'rndrizKT3MK1iimdxRdWabcF7Zg7AR5T4nud4EkHBof', 'decimals': 8, 'balance': 263867102430276, 'uiAmount': 2638671.02430276, 'chainId': 'solana', 'name': 'Render Token', 'symbol': 'RENDER', 'icon': 'https://shdw-drive.genesysgo.net/5zseP54TGrcz9C8HdjZwJJsZ6f3VbP11p1abwKWGykZH/rndr.png', 'logoURI': 'https://shdw-drive.genesysgo.net/5zseP54TGrcz9C8HdjZwJJsZ6f3VbP11p1abwKWGykZH/rndr.png', 'priceUsd': 7.998156832298574, 'valueUsd': 21104504.681215398}, 'second_top_holding': {'address': 'Hax9LTgsQkze1YFychnBLtFH8gYbQKtKfWKKg2SP6gdD', 'decimals': 9, 'balance': 30061285734549380, 'uiAmount': 30061285.73454938, 'chainId': 'solana', 'name': 'TARS AI', 'symbol': 'TAI', 'icon': 'https://coffee-important-lizard-419.mypinata.cloud/ipfs/Qmf19J2Teszt5ZgqrzQFuWk64xvQzfZFfEEn8ntzpbz36W', 'logoURI': 'https://coffee-important-lizard-419.mypinata.cloud/ipfs/Qmf19J2Teszt5ZgqrzQFuWk64xvQzfZFfEEn8ntzpbz36W', 'priceUsd': 0.2927850116012065, 'valueUsd': 8801493.892537225}, 'third_top_holding': {'address': 'DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263', 'decimals': 5, 'balance': 28795943538646496, 'uiAmount': 287959435386.46497, 'chainId': 'solana', 'name': 'Bonk', 'symbol': 'Bonk', 'icon': 'https://arweave.net/hQiPZOsRZXGXBJd_82PhVdlM_hACsT_q6wqwf5cSY7I', 'logoURI': 'https://arweave.net/hQiPZOsRZXGXBJd_82PhVdlM_hACsT_q6wqwf5cSY7I', 'priceUsd': 3.023144642060312e-05, 'valueUsd': 8705430.242193041}}, {'wallet': '5Q544fKrFoe6tsEbD7S8EmxGTJYAKtTVhAW5Q5pge4j1', 'error': 'Exception fetching portfolio for wallet 5Q544fKrFoe6tsEbD7S8EmxGTJYAKtTVhAW5Q5pge4j1: '}, {'count': 5, 'wallet': '8mYiSiL5GXFN5NjWdhFN3LD7g21ELFeHLx6ygGhdKY2r', 'amount': 33000000.000002, 'share_in_percent': 4.504, 'net_worth': 241500.91731540646, 'net_worth_excluding': 0.003940391878131777, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 33000000000002, 'uiAmount': 33000000.000002, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 241500.91337501458}, 'second_top_holding': {'address': '9YX6TR6X6gCmMhyVyZ43WX5hW6NahNXUqGm8d4wdxQKW', 'decimals': 9, 'balance': 3000000000, 'uiAmount': 3, 'chainId': 'solana', 'name': 'Golden Dog', 'symbol': 'GDOG', 'icon': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'logoURI': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'priceUsd': 0.0013134639611676532, 'valueUsd': 0.00394039188350296}, 'third_top_holding': 0}, {'count': 6, 'wallet': '6RftVSE6w9cNbcjutmjLSsYq83mXUJ6WXnPYQe4wuXfc', 'amount': 33000000, 'share_in_percent': 4.504, 'net_worth': 241500.92388272626, 'net_worth_excluding': 0.010507711675018072, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 33000000000000, 'uiAmount': 33000000, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 241500.91337501458}, 'second_top_holding': {'address': '9YX6TR6X6gCmMhyVyZ43WX5hW6NahNXUqGm8d4wdxQKW', 'decimals': 9, 'balance': 8000000000, 'uiAmount': 8, 'chainId': 'solana', 'name': 'Golden Dog', 'symbol': 'GDOG', 'icon': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'logoURI': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'priceUsd': 0.0013134639611676532, 'valueUsd': 0.010507711689341226}, 'third_top_holding': 0}, {'count': 7, 'wallet': 'ASTyfSima4LLAdDgoFGkgqoKowG1LZFDr9fAQrg7iaJZ', 'amount': 23764147.073332, 'share_in_percent': 3.244, 'net_worth': 128067372.53486338, 'net_worth_excluding': 127825871.62148836, 'first_top_holding': {'address': 'HeLp6NuQkmYB4pYWo2zYs22mESHXPQYzXbB8n4V98jwC', 'decimals': 9, 'balance': 4465689640398524, 'uiAmount': 4465689.640398524, 'chainId': 'solana', 'name': 'ai16z', 'symbol': 'ai16z', 'icon': 'https://ipfs.io/ipfs/QmcNTVAoyJ7zDbPnN9jwiMoB8uCoJBUP9RGmmiGGHv44yX', 'logoURI': 'https://ipfs.io/ipfs/QmcNTVAoyJ7zDbPnN9jwiMoB8uCoJBUP9RGmmiGGHv44yX', 'priceUsd': 1.842609766225524, 'valueUsd': 8228523.344330468}, 'second_top_holding': {'address': '4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R', 'decimals': 6, 'balance': 1197683453477, 'uiAmount': 1197683.453477, 'chainId': 'solana', 'name': 'Raydium', 'symbol': 'RAY', 'icon': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png', 'priceUsd': 5.36193572817574, 'valueUsd': 6421901.700243233}, 'third_top_holding': {'address': '9BB6NFEcjBCtnNLFko2FqVQBq8HHM13kCyYcdQbgpump', 'decimals': 6, 'balance': 5373887962666, 'uiAmount': 5373887.962666, 'chainId': 'solana', 'name': 'Fartcoin ', 'symbol': 'Fartcoin ', 'icon': 'https://ipfs.io/ipfs/QmQr3Fz4h1etNsF7oLGMRHiCzhB5y9a7GjyodnF7zLHK1g', 'logoURI': 'https://ipfs.io/ipfs/QmQr3Fz4h1etNsF7oLGMRHiCzhB5y9a7GjyodnF7zLHK1g', 'priceUsd': 1.041289972941375, 'valueUsd': 5595775.65123446}}, {'count': 8, 'wallet': 'CT8LZCL1VfacnBJQk2n3fdYQJM6NWrHkKhGiyy5uQkbt', 'amount': 21775969.995, 'share_in_percent': 2.972, 'net_worth': 241679.6090023756, 'net_worth_excluding': 178.69562736101216, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 21775969995000, 'uiAmount': 21775969.995, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 241500.91337501458}, 'second_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 900015502, 'uiAmount': 0.900015502, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 178.69168696912476}, 'third_top_holding': {'address': '9YX6TR6X6gCmMhyVyZ43WX5hW6NahNXUqGm8d4wdxQKW', 'decimals': 9, 'balance': 3000000000, 'uiAmount': 3, 'chainId': 'solana', 'name': 'Golden Dog', 'symbol': 'GDOG', 'icon': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'logoURI': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'priceUsd': 0.0013134639611676532, 'valueUsd': 0.00394039188350296}}, {'count': 9, 'wallet': 'u6PJ8DtQuPFnfmwHbGFULQ4u4EgjDiyYKjVEsynXq2w', 'amount': 13501341.152546, 'share_in_percent': 1.843, 'net_worth': 486236010.9942749, 'net_worth_excluding': 486077090.42270565, 'first_top_holding': {'address': 'HeLp6NuQkmYB4pYWo2zYs22mESHXPQYzXbB8n4V98jwC', 'decimals': 9, 'balance': 34843047913225436, 'uiAmount': 34843047.913225435, 'chainId': 'solana', 'name': 'ai16z', 'symbol': 'ai16z', 'icon': 'https://ipfs.io/ipfs/QmcNTVAoyJ7zDbPnN9jwiMoB8uCoJBUP9RGmmiGGHv44yX', 'logoURI': 'https://ipfs.io/ipfs/QmcNTVAoyJ7zDbPnN9jwiMoB8uCoJBUP9RGmmiGGHv44yX', 'priceUsd': 1.842609766225524, 'valueUsd': 64202140.369973056}, 'second_top_holding': {'address': 'rndrizKT3MK1iimdxRdWabcF7Zg7AR5T4nud4EkHBof', 'decimals': 8, 'balance': 355178475496355, 'uiAmount': 3551784.75496355, 'chainId': 'solana', 'name': 'Render Token', 'symbol': 'RENDER', 'icon': 'https://shdw-drive.genesysgo.net/5zseP54TGrcz9C8HdjZwJJsZ6f3VbP11p1abwKWGykZH/rndr.png', 'logoURI': 'https://shdw-drive.genesysgo.net/5zseP54TGrcz9C8HdjZwJJsZ6f3VbP11p1abwKWGykZH/rndr.png', 'priceUsd': 7.998156832298574, 'valueUsd': 28407731.504765633}, 'third_top_holding': {'address': '9BB6NFEcjBCtnNLFko2FqVQBq8HHM13kCyYcdQbgpump', 'decimals': 6, 'balance': 21412619357962, 'uiAmount': 21412619.357962, 'chainId': 'solana', 'name': 'Fartcoin ', 'symbol': 'Fartcoin ', 'icon': 'https://ipfs.io/ipfs/QmQr3Fz4h1etNsF7oLGMRHiCzhB5y9a7GjyodnF7zLHK1g', 'logoURI': 'https://ipfs.io/ipfs/QmQr3Fz4h1etNsF7oLGMRHiCzhB5y9a7GjyodnF7zLHK1g', 'priceUsd': 1.041289972941375, 'valueUsd': 22296745.831856214}}, {'count': 10, 'wallet': 'HiBAVJCy8Mwg73GPow7iYhYrM3uZ9isqPpfns6zMpAxo', 'amount': 12518160, 'share_in_percent': 1.709, 'net_worth': 147347.82070302576, 'net_worth_excluding': 0.003940391878131777, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 12518160000000, 'uiAmount': 12518160, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 147347.81676263388}, 'second_top_holding': {'address': '9YX6TR6X6gCmMhyVyZ43WX5hW6NahNXUqGm8d4wdxQKW', 'decimals': 9, 'balance': 3000000000, 'uiAmount': 3, 'chainId': 'solana', 'name': 'Golden Dog', 'symbol': 'GDOG', 'icon': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'logoURI': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'priceUsd': 0.0013134639611676532, 'valueUsd': 0.00394039188350296}, 'third_top_holding': 0}, {'count': 11, 'wallet': 'G1Tikkwa5C6bZE82WGnFevfzQ3VztkvbsWCQLraQSDEp', 'amount': 12500000, 'share_in_percent': 1.706, 'net_worth': 147134.0643400771, 'net_worth_excluding': 0.003940391878131777, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 12500000000000, 'uiAmount': 12500000, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 147134.06039968523}, 'second_top_holding': {'address': '9YX6TR6X6gCmMhyVyZ43WX5hW6NahNXUqGm8d4wdxQKW', 'decimals': 9, 'balance': 3000000000, 'uiAmount': 3, 'chainId': 'solana', 'name': 'Golden Dog', 'symbol': 'GDOG', 'icon': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'logoURI': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'priceUsd': 0.0013134639611676532, 'valueUsd': 0.00394039188350296}, 'third_top_holding': 0}, {'count': 12, 'wallet': 'Dh8mCAVtbJUkriPLuajxe9tFFw9QiG39XDR74Q9MtTPz', 'amount': 11904819.13283, 'share_in_percent': 1.625, 'net_worth': 140326.07514139928, 'net_worth_excluding': 197.72495442826767, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 11904819132830, 'uiAmount': 11904819.13283, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 140128.35018697102}, 'second_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 995821585, 'uiAmount': 0.995821585, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 197.71330443585808}, 'third_top_holding': {'address': '7mSU5ZJsYsm3CPf2gzfYAWXE6CghFw86k7vjkpsYznzP', 'decimals': 6, 'balance': 2000000, 'uiAmount': 2, 'chainId': 'solana', 'name': 'SOL.X', 'symbol': 'SOL.X', 'icon': 'https://ipfs.io/ipfs/QmdzMRHLi45tV6Aj7z5hQhwRtbihSi4ZwvCct7X3qpbK6T', 'logoURI': 'https://ipfs.io/ipfs/QmdzMRHLi45tV6Aj7z5hQhwRtbihSi4ZwvCct7X3qpbK6T', 'priceUsd': 0.003854800265136696, 'valueUsd': 0.007709600530273392}}, {'count': 13, 'wallet': '6e2NaGfqTvtqJ6ZCLqiR8eopQ7kDPo5iRYG7muJEedXs', 'amount': 11276591.823939, 'share_in_percent': 1.539, 'net_worth': 132753.10091466122, 'net_worth_excluding': 19.44151257822523, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 11276591823939, 'uiAmount': 11276591.823939, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 132733.659402083}, 'second_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 97901120, 'uiAmount': 0.09790112, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 19.437572186358537}, 'third_top_holding': {'address': '9YX6TR6X6gCmMhyVyZ43WX5hW6NahNXUqGm8d4wdxQKW', 'decimals': 9, 'balance': 3000000000, 'uiAmount': 3, 'chainId': 'solana', 'name': 'Golden Dog', 'symbol': 'GDOG', 'icon': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'logoURI': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'priceUsd': 0.0013134639611676532, 'valueUsd': 0.00394039188350296}}, {'count': 14, 'wallet': '2tpsVwVwefhi26shsKXuFoEt8gbagJvaAdYicoWDFsUn', 'amount': 10002441.266611, 'share_in_percent': 1.365, 'net_worth': 117778.34517268566, 'net_worth_excluding': 42.36137541789503, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 10002441266611, 'uiAmount': 10002441.266611, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 117735.98379726776}, 'second_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 213361322, 'uiAmount': 0.213361322, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 42.36137541788989}, 'third_top_holding': 0}, {'count': 15, 'wallet': '88wDr8WG4eYtLKqGhkTHJGKEuzX68NU3zJC29onvPcZM', 'amount': 9200000, 'share_in_percent': 1.256, 'net_worth': 108290.67239456021, 'net_worth_excluding': 0.003940391878131777, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 9200000000000, 'uiAmount': 9200000, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 108290.66845416834}, 'second_top_holding': {'address': '9YX6TR6X6gCmMhyVyZ43WX5hW6NahNXUqGm8d4wdxQKW', 'decimals': 9, 'balance': 3000000000, 'uiAmount': 3, 'chainId': 'solana', 'name': 'Golden Dog', 'symbol': 'GDOG', 'icon': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'logoURI': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'priceUsd': 0.0013134639611676532, 'valueUsd': 0.00394039188350296}, 'third_top_holding': 0}, {'count': 16, 'wallet': 'SDRmLfvMdv43bW7d7aEKZNjUUSC5E7xN22M5DykbL4X', 'amount': 8510400, 'share_in_percent': 1.162, 'net_worth': 100173.58055043037, 'net_worth_excluding': 0.003940391878131777, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 8510400000000, 'uiAmount': 8510400, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 100173.5766100385}, 'second_top_holding': {'address': '9YX6TR6X6gCmMhyVyZ43WX5hW6NahNXUqGm8d4wdxQKW', 'decimals': 9, 'balance': 3000000000, 'uiAmount': 3, 'chainId': 'solana', 'name': 'Golden Dog', 'symbol': 'GDOG', 'icon': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'logoURI': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'priceUsd': 0.0013134639611676532, 'valueUsd': 0.00394039188350296}, 'third_top_holding': 0}, {'count': 17, 'wallet': '7eRK1uDfSci41sGF8UbFasuS3KmCeytdeZRQTHhkngkH', 'amount': 7193512.213409, 'share_in_percent': 0.982, 'net_worth': 171877.4677055967, 'net_worth_excluding': 87204.61486610924, 'first_top_holding': {'address': '6HKPL1ZRdokEoBPtEMfzsPxvNQZvkbr8JQXvvug1Lw5S', 'decimals': 8, 'balance': 8750603476359, 'uiAmount': 87506.03476359, 'chainId': 'solana', 'name': 'o.xyz (Wormhole)', 'symbol': 'O', 'icon': None, 'logoURI': None, 'priceUsd': 0.996528990186394, 'valueUsd': 87202.30045817583}, 'second_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 7193512213409, 'uiAmount': 7193512.213409, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 84672.85283948746}, 'third_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 11637120, 'uiAmount': 0.01163712, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 2.3104675415492357}}, {'count': 18, 'wallet': 'D5jx4wmxuPz18hqmgpCMLGVq3uSksCafCp5xjVe1nw8p', 'amount': 5171503.668384, 'share_in_percent': 0.706, 'net_worth': 13834578.561528781, 'net_worth_excluding': 13773706.214880684, 'first_top_holding': {'address': 'Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB', 'decimals': 6, 'balance': 1942853830447, 'uiAmount': 1942853.830447, 'chainId': 'solana', 'name': 'USDT', 'symbol': 'USDT', 'icon': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB/logo.svg', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB/logo.svg', 'priceUsd': 0.999877217574502, 'valueUsd': 1942615.2821413097}, 'second_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 6233833307332, 'uiAmount': 6233.833307332, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 1237683.3371159793}, 'third_top_holding': {'address': '74SBV4zDXxTRgv1pEMoECskKBkZHc2yGPnc7GYVepump', 'decimals': 6, 'balance': 1206836193692, 'uiAmount': 1206836.193692, 'chainId': 'solana', 'name': 'swarms', 'symbol': 'swarms', 'icon': 'https://ipfs.io/ipfs/QmYhYx1r94b8apSJpRjUujCE5xXhzLXzXaR3ZmdGfUkvGb', 'logoURI': 'https://ipfs.io/ipfs/QmYhYx1r94b8apSJpRjUujCE5xXhzLXzXaR3ZmdGfUkvGb', 'priceUsd': 0.397276842055213, 'valueUsd': 479448.0719078911}}, {'count': 19, 'wallet': 'EXmMcYVPuLiyzd9upXmovrH8bLL8q4SoM4FBbQcZJa4Z', 'amount': 4395878.555326, 'share_in_percent': 0.6, 'net_worth': 58994.66056955025, 'net_worth_excluding': 7251.983700028912, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 4395878555326, 'uiAmount': 4395878.555326, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 51742.67686952134}, 'second_top_holding': {'address': 'G6haJithfeUgSghVpu1rDPCq2NFiYcJFHNpHEANbpump', 'decimals': 6, 'balance': 2442257810550, 'uiAmount': 2442257.81055, 'chainId': 'solana', 'name': 'Roastmaster9000', 'symbol': 'RM9000', 'icon': 'https://ipfs.io/ipfs/QmNeYxx4BsEK8k777YusVaP6aEG2Fohim93QxFqwgvmWZH', 'logoURI': 'https://ipfs.io/ipfs/QmNeYxx4BsEK8k777YusVaP6aEG2Fohim93QxFqwgvmWZH', 'priceUsd': 0.002708282739003144, 'valueUsd': 6614.324672508176}, 'third_top_holding': {'address': 'GSXvsGygcMcbByTnGZqBtML9Ntj373bJtNXEfRrppump', 'decimals': 6, 'balance': 1399725307851, 'uiAmount': 1399725.307851, 'chainId': 'solana', 'name': 'AMERICA', 'symbol': '🇺🇸', 'icon': 'https://ipfs.io/ipfs/QmRbTcsh78awHWH8A584v7BmeR4YRLLCWTL8k24XgHyUvV', 'logoURI I': 'https://ipfs.io/ipfs/QmRbTcsh78awHWH8A584v7BmeR4YRLLCWTL8k24XgHyUvV', 'priceUsd': 0.00040009908283450315, 'valueUsd': 560.0288118914277}}, {'count': 20, 'wallet': 'n8NJGxC6AfSAioKxBPZPeLLLGc3TWwdNtR2VAhDZqaL', 'amount': 4261044.003161, 'share_in_percent': 0.582, 'net_worth': 50156.16236618142, 'net_worth_excluding': 0.5859080368536524, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 4261044003161, 'uiAmount': 4261044.003161, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 50155.57645814457}, 'second_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 2951040, 'uiAmount': 0.00295104, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 0.5859080368521984}, 'third_top_holding': 0}, {'count': 21, 'wallet': 'EG445CCwh5FgfHhztzZwwDbB82x5RyaskvtvTvyor8Ax', 'amount': 4241015.373914, 'share_in_percent': 0.579, 'net_worth': 49939.68074288277, 'net_worth_excluding': 19.855768366280245, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 4241015373914, 'uiAmount': 4241015.373914, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 49919.82497451649}, 'second_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 99987600, 'uiAmount': 0.0999876, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 19.851827974396443}, 'third_top_holding': {'address': '9YX6TR6X6gCmMhyVyZ43WX5hW6NahNXUqGm8d4wdxQKW', 'decimals': 9, 'balance': 3000000000, 'uiAmount': 3, 'chainId': 'solana', 'name': 'Golden Dog', 'symbol': 'GDOG', 'icon': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'logoURI': 'https://quicknode.quicknode-ipfs.com/ipfs/QmPhQK6tux76RU87C2wjQwNtigMfmhuSZtuZsEZC4J8s3j', 'priceUsd': 0.0013134639611676532, 'valueUsd': 0.00394039188350296}}, {'count': 22, 'wallet': 'DxBA9rCSxk6Nv1JDtjosSqFWaW4ZQxwRXyHs35ip5JzD', 'amount': 4016083.567608, 'share_in_percent': 0.548, 'net_worth': 69212.9343875889, 'net_worth_excluding': 21940.719811059396, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 4016083567608, 'uiAmount': 4016083.567608, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 47272.214576529506}, 'second_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 56414895755, 'uiAmount': 56.414895755, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 11200.776953559924}, 'third_top_holding': {'address': 'BZLbGTNCSFfoth2GYDtwr7e4imWzpR5jqcUuGEwr646K', 'decimals': 8, 'balance': 268760553654, 'uiAmount': 2687.60553654, 'chainId': 'solana', 'name': 'IO', 'symbol': 'IO', 'icon': 'https://bafkreicnqsbhpzxiasdm5esr7fqi3vcjvcbfefo4sq4y3ff747rfqf7w7i.ipfs.nftstorage.link', 'logoURI': 'https://bafkreicnqsbhpzxiasdm5esr7fqi3vcjvcbfefo4sq4y3ff747rfqf7w7i.ipfs.nftstorage.link', 'priceUsd': 3.29706986327921, 'valueUsd': 8861.223218908384}}, {'count': 23, 'wallet': '3eaSNUK8G7j2C5U6Xndyk7Ey5JmytraRmsccBcUyqjxC', 'amount': 4000000.000004, 'share_in_percent': 0.546, 'net_worth': 48979.01964052887, 'net_worth_excluding': 1896.1203125825123, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 4000000000004, 'uiAmount': 4000000.000004, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 47082.89932794636}, 'second_top_holding': {'address': '2otVNpcHXn9MKeDk3Zby5uanF3s7tki4toaJ3PZcXaUd', 'decimals': 9, 'balance': 272794081669262, 'uiAmount': 272794.081669262, 'chainId': 'solana', 'name': 'OSOL', 'symbol': 'OSOL', 'icon': 'https://gateway.pinata.cloud/ipfs/QmQ9wHkApZ8r2FKXAYA6CCCeuYFrsVyHZkfHjKaFSsmv1F', 'logoURI': 'https://gateway.pinata.cloud/ipfs/QmQ9wHkApZ8r2FKXAYA6CCCeuYFrsVyHZkfHjKaFSsmv1F', 'priceUsd': 0.035729861945289765, 'valueUsd': 1878.7196385910893}, 'third_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 33299476, 'uiAmount': 0.033299476, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 6.611374502333719}}, {'count': 24, 'wallet': '8eAjtBw7azoCMDgd3REwHZbGttNt4cPZ7uVUY8fAdWnt', 'amount': 3223534.017875, 'share_in_percent': 0.44, 'net_worth': 44521.04002430609, 'net_worth_excluding': 6577.708113389264, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 3223534017875, 'uiAmount': 3223534.017875, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 37943.33191091682}, 'second_top_holding': {'address': 'BZLbGTNCSFfoth2GYDtwr7e4imWzpR5jqcUuGEwr646K', 'decimals': 8, 'balance': 120006482725, 'uiAmount': 1200.06482725, 'chainId': 'solana', 'name': 'IO', 'symbol': 'IO', 'icon': 'https://bafkreicnqsbhpzxiasdm5esr7fqi3vcjvcbfefo4sq4y3ff747rfqf7w7i.ipfs.nftstorage.link', 'logoURI': 'https://bafkreicnqsbhpzxiasdm5esr7fqi3vcjvcbfefo4sq4y3ff747rfqf7w7i.ipfs.nftstorage.link', 'priceUsd': 3.29706986327921, 'valueUsd': 3956.697575907346}, 'third_top_holding': {'address': '2otVNpcHXn9MKeDk3Zby5uanF3s7tki4toaJ3PZcXaUd', 'decimals': 9, 'balance': 490422192741000, 'uiAmount': 490422.192741, 'chainId': 'solana', 'name': 'OSOL', 'symbol': 'OSOL', 'icon': 'https://gateway.pinata.cloud/ipfs/QmQ9wHkApZ8r2FKXAYA6CCCeuYFrsVyHZkfHjKaFSsmv1F', 'logoURI': 'https://gateway.pinata.cloud/ipfs/QmQ9wHkApZ8r2FKXAYA6CCCeuYFrsVyHZkfHjKaFSsmv1F', 'priceUsd': 0.035729861945289765, 'valueUsd': 1878.7196385910893}}, {'count': 25, 'wallet': '3QLV3puPhL3eX1cikhc6oxmXW8tA2xV1j6d8sfB7Fcmd', 'amount': 3147742.316762, 'share_in_percent': 0.43, 'net_worth': 862535.0840322837, 'net_worth_excluding': 825483.8753797153, 'first_top_holding': {'address': 'HNg5PYJmtqcmzXrv6S9zP1CDKk5BgDuyFBxbvNApump', 'decimals': 6, 'balance': 630945614693, 'uiAmount': 630945.614693, 'chainId': 'solana', 'name': 'Alchemist AI', 'symbol': 'ALCH', 'icon': 'https://ipfs.io/ipfs/QmYqwkPV1p4DraqN5TfLZVhyrAusSkHfvFDZMJAWALZJxj', 'logoURI': 'https://ipfs.io/ipfs/QmYqwkPV1p4DraqN5TfLZVhyrAusSkHfvFDZMJAWALZJxj', 'priceUsd': 0.18771536407274267, 'valueUsd': 118438.18577219691}, 'second_top_holding': {'address': '5voS9evDjxF589WuEub5i4ti7FWQmZCsAsyD5ucbuRqM', 'decimals': 6, 'balance': 1196977678970, 'uiAmount': 1196977.67897, 'chainId': 'solana', 'name': 'Eliza', 'symbol': 'ELIZA', 'icon': 'https://ipfs.io/ipfs/QmXRKBceEnjWV1EvDRNLAzMTBCvfzmFajopWevczU7bYY1', 'logoURI': 'https://ipfs.io/ipfs/QmXRKBceEnjWV1EvDRNLAzMTBCvfzmFajopWevczU7bYY1', 'priceUsd': 0.08516168983315732, 'valueUsd': 101936.6418336557}, 'third_top_holding': {'address': 'FQ1tyso61AH1tzodyJfSwmzsD3GToybbRNoZxUBz21p8', 'decimals': 6, 'balance': 1200000000000, 'uiAmount': 1200000, 'chainId': 'solana', 'name': 'Dasha', 'symbol': 'vvaifu', 'icon': 'https://ipfs.io/ipfs/QmbN2UccKMabyX4SBwebM9C3eFpM7QgEPd8muB1mDt5jRK', 'logoURI': 'https://ipfs.io/ipfs/QmbN2UccKMabyX4SBwebM9C3eFpM7QgEPd8muB1mDt5jRK', 'priceUsd': 0.07778016497046346, 'valueUsd': 93336.19796455615}}, {'count': 26, 'wallet': 'D3hxsQG3bWhKEb6581MgUruodihfEnq6aPyhnty1fxUJ', 'amount': 3132765.734482, 'share_in_percent': 0.428, 'net_worth': 90318.39836022761, 'net_worth_excluding': 53443.474936600505, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 3132765734482, 'uiAmount': 3132765.734482, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 36874.92342362711}, 'second_top_holding': {'address': 'DKu9kykSfbN5LBfFXtNNDPaX35o4Fv6vJ9FKk7pZpump', 'decimals': 6, 'balance': 214480889345, 'uiAmount': 214480.889345, 'chainId': 'solana', 'name': 'Ava AI', 'symbol': 'AVA', 'icon': 'https://ipfs.io/ipfs/QmQdYxGMCLEZqWpgKo8BREBa5YSUbxFu6qaWiVXUW1yUhg', 'logoURI': 'https://ipfs.io/ipfs/QmQdYxGMCLEZqWpgKo8BREBa5YSUbxFu6qaWiVXUW1yUhg', 'priceUsd': 0.15374749799415582, 'valueUsd': 32975.90010435515}, 'third_top_holding': {'address': '7h5AzpYTAnh4Gyux8Gqko5Fvx4AYQBZdkzHZ2CsBudvJ', 'decimals': 6, 'balance': 568922945221, 'uiAmount': 568922.945221, 'chainId': 'solana', 'name': 'griffain new hedge fund', 'symbol': 'Citadail', 'icon': 'https://ipfs.io/ipfs/QmT1tQQXicwdGYtkemU83UgvpYyubJHLWi8BYxHmNG6tDB', 'logoURI': 'https://ipfs.io/ipfs/QmT1tQQXicwdGYtkemU83UgvpYyubJHLWi8BYxHmNG6tDB', 'priceUsd': 0.033580716874709295, 'valueUsd': 19104.840346992147}}, {'count': 27, 'wallet': 'Box9BAX65nU2B3GE4n4FEnmurDQhmqraQzPjbMSDZMKz', 'amount': 2872582.471348, 'share_in_percent': 0.392, 'net_worth': 35823.15324537601, 'net_worth_excluding': 2010.775417984507, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 2872582471348, 'uiAmount': 2872582.471348, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 33812.3778273915}, 'second_top_holding': {'address': '2otVNpcHXn9MKeDk3Zby5uanF3s7tki4toaJ3PZcXaUd', 'decimals': 9, 'balance': 115198771097847, 'uiAmount': 115198.771097847, 'chainId': 'solana', 'name': 'OSOL', 'symbol': 'OSOL', 'icon': 'https://gateway.pinata.cloud/ipfs/QmQ9wHkApZ8r2FKXAYA6CCCeuYFrsVyHZkfHjKaFSsmv1F', 'logoURI': 'https://gateway.pinata.cloud/ipfs/QmQ9wHkApZ8r2FKXAYA6CCCeuYFrsVyHZkfHjKaFSsmv1F', 'priceUsd': 0.035729861945289765, 'valueUsd': 1878.7196385910893}, 'third_top_holding': {'address': 'vSoLxydx6akxyMD9XEcPvGYNGq6Nn66oqVb3UkGkei7', 'decimals': 9, 'balance': 372637717, 'uiAmount': 0.372637717, 'chainId': 'solana', 'name': 'The Vault', 'symbol': 'vSOL', 'icon': 'https://bafkreig55mf3lazzbgndiqyqvdmchdsykvvebww7cqlws6ywgog5xfdzta.ipfs.nftstorage.link/', 'logoURI': 'https://bafkreig55mf3lazzbgndiqyqvdmchdsykvvebww7cqlws6ywgog5xfdzta.ipfs.nftstorage.link/', 'priceUsd': 211.24821985694186, 'valueUsd': 78.71905436780487}}, {'count': 28, 'wallet': '5PsH6VX3MAzitMcR6cu9BMsYSEF99bjbowBoNCWTaUx9', 'amount': 2794298.139498, 'share_in_percent': 0.381, 'net_worth': 33794.98608692249, 'net_worth_excluding': 904.0715883923403, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 2794298139498, 'uiAmount': 2794298.139498, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 32890.91449853015}, 'second_top_holding': {'address': '2otVNpcHXn9MKeDk3Zby5uanF3s7tki4toaJ3PZcXaUd', 'decimals': 9, 'balance': 25112206361094, 'uiAmount': 25112.206361094, 'chainId': 'solana', 'name': 'OSOL', 'symbol': 'OSOL', 'icon': 'https://gateway.pinata.cloud/ipfs/QmQ9wHkApZ8r2FKXAYA6CCCeuYFrsVyHZkfHjKaFSsmv1F', 'logoURI': 'https://gateway.pinata.cloud/ipfs/QmQ9wHkApZ8r2FKXAYA6CCCeuYFrsVyHZkfHjKaFSsmv1F', 'priceUsd': 0.035729861945289765, 'valueUsd': 897.255666423516}, 'third_top_holding': {'address': 'CNKEXXypBC66cZ111Mg3JUxyczXS1E9T6MWEufzQZVMo', 'decimals': 9, 'balance': 955290941682, 'uiAmount': 955.290941682, 'chainId': 'solana', 'name': 'REX', 'symbol': 'REX', 'icon': 'https://cdn.dexscreener.com/cms/images/WCsIL7RyyYjPN6ep', 'logoURI': 'https://cdn.dexscreener.com/cms/images/WCsIL7RyyYjPN6ep', 'priceUsd': 0.0034682041164015797, 'valueUsd': 3.313143976302654}}, {'count': 29, 'wallet': '8nXbrdjjaHB73CRPRenGEQj73wbtEFGDwXsehRGMhsap', 'amount': 2596389.093093, 'share_in_percent': 0.354, 'net_worth': 30576.534979646978, 'net_worth_excluding': 15.153408108624717, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 2596389093093, 'uiAmount': 2596389.093093, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 30561.381571538353}, 'second_top_holding': {'address': 'HAPPYwgFcjEJDzRtfWE6tiHE9zGdzpNky2FvjPHsvvGZ', 'decimals': 9, 'balance': 1247340000000, 'uiAmount': 1247.34, 'chainId': 'solana', 'name': 'Happy Cat', 'symbol': 'HAPPY', 'icon': 'https://ipfs.io/ipfs/QmePUch18pVBHf4z2LM7D6RC3wnaFB3Tff3iXVE6nKLsws', 'logoURI': 'https://ipfs.io/ipfs/QmePUch18pVBHf4z2LM7D6RC3wnaFB3Tff3iXVE6nKLsws', 'priceUsd': 0.009042017017039404, 'valueUsd': 11.278469506033929}, 'third_top_holding': {'address': 'So11111111111111111111111111111111111111111', 'decimals': 9, 'balance': 11071760, 'uiAmount': 0.01107176, 'chainId': 'solana', 'name': 'SOL', 'symbol': 'SOL', 'logoURI': 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', 'priceUsd': 198.5428990634483, 'valueUsd': 2.198219328134724}}, {'count': 30, 'wallet': 'Epvap8HZ5649V1tcY7T8AwKu9VSMmPW3A96R4uAoYRMt', 'amount': 2404503.710054, 'share_in_percent': 0.328, 'net_worth': 33787.531775703326, 'net_worth_excluding': 5484.780247195129, 'first_top_holding': {'address': '7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump', 'decimals': 6, 'balance': 2404503710054, 'uiAmount': 2404503.710054, 'chainId': 'solana', 'name': 'OBOT', 'symbol': 'OBOT', 'icon': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'logoURI': 'https://ipfs.io/ipfs/QmeeSqjjrpQ5ht5uc21uG3j3PdVM46CkfTXUCyt23vs462', 'priceUsd': 0.011770724831974819, 'valueUsd': 28302.751528508197}, 'second_top_holding': {'address': 'BZLbGTNCSFfoth2GYDtwr7e4imWzpR5jqcUuGEwr646K', 'decimals': 8, 'balance': 101293055575, 'uiAmount': 1012.93055575, 'chainId': 'solana', 'name': 'IO', 'symbol': 'IO', 'icon': 'https://bafkreicnqsbhpzxiasdm5esr7fqi3vcjvcbfefo4sq4y3ff747rfqf7w7i.ipfs.nftstorage.link', 'logoURI': 'https://bafkreicnqsbhpzxiasdm5esr7fqi3vcjvcbfefo4sq4y3ff747rfqf7w7i.ipfs.nftstorage.link', 'priceUsd': 3.29706986327921, 'valueUsd': 3339.7028089579867}, 'third_top_holding': {'address': '2otVNpcHXn9MKeDk3Zby5uanF3s7tki4toaJ3PZcXaUd', 'decimals': 9, 'balance': 247777558871000, 'uiAmount': 247777.558871, 'chainId': 'solana', 'name': 'OSOL', 'symbol': 'OSOL', 'icon': 'https://gateway.pinata.cloud/ipfs/QmQ9wHkApZ8r2FKXAYA6CCCeuYFrsVyHZkfHjKaFSsmv1F', 'logoURI': 'https://gateway.pinata.cloud/ipfs/QmQ9wHkApZ8r2FKXAYA6CCCeuYFrsVyHZkfHjKaFSsmv1F', 'priceUsd': 0.035729861945289765, 'valueUsd': 1878.7196385910893}}]'''
    timenow = float(time.time())

    print(token_info)
    
    array_of_objects = ast.literal_eval(toparse)
    #print(array_of_objects)

    # Convert each dictionary in the list to a JSON string
    array_of_json = [json.dumps(d) for d in array_of_objects]

    
    holders = asyncio.run(top_holders_holdings_parsed(token_info, array_of_objects))

    print (holders)
   #  import telegram
   #  import os
   #  import telebot
   #  token = os.environ.get('tgbot')
   # 
   #  if not token:
   #      raise ValueError("Bot token not found in environment variables")
   #  
   #  bot = telebot.TeleBot(token)
   #  chat_id = os.environ.get('tgchat')
   #  if len(holders) > 4096:
   #      for text in split_message(holders):
   #          bot.send_message(chat_id=chat_id, text=text, parse_mode=telegram.constants.ParseMode.MARKDOWN)
   #  else:
   #      bot.send_message(chat_id=chat_id, text=holders)
   #  
    #print(asyncio.run(get_wallet_portfolio("GitBH362uaPmp5yt5rNoPQ6FzS2t7oUBqeyodFPJSZ84")))
    # fresh_wallets = asyncio.run(fresh_wallets("7yZFFUhq9ac7DY4WobLL539pJEUbMnQ5AGQQuuEMpump", 50))
    # print((fresh_wallets[1]))
    # print(fresh_wallets_parsed(fresh_wallets[0], fresh_wallets[1]))
    # print(float(time.time()) - timenow)
